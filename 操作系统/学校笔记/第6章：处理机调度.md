# 处理机的多级调度
## 作业调度
对存放在辅存设备上的⼤量作业，以⼀定的策略进⾏挑选，分配主存等必要的资源，建⽴作业对应 的进程，使其投⼊运⾏。 
- 作业存储在辅存设备上 
- 在辅存中挑选⼀个作业，将其载⼊到主存.
- 作业被载⼊到主存后，建⽴其对应的进程结构,使之投⼊运⾏.
- 运⾏完毕，回到第⼆步



## 进程调度
进程调度称为微观调度，其任务是对所有进入主存的进程，确定进程什么时候获得处理机、使用多长时间等。

# 作业调度
## 作业的状态
1. 后备状态：将作业输入到等待队列，等待调度
2. 执行状态：从作业进入主存到开始运行，到作业计算完成为止
3. 完成状态：从作业计算完成开始，到善后处理完毕并退出系统为止
![[Pasted image 20231127092719.png]]

## 作业调度的功能
- 确定数据结构：为每个作业分配一个作业控制块jcb
- 确定调度算法
- 分配资源：作业调度程序只保证被选中的作业获得使用处理机的资格，而处理机的分配工作由进程调度程序完成
- 善后处理

## 作业控制块
存放作业控制和管理信息
![[Pasted image 20231127093458.png]]

## 调度算法性能衡量
![[Pasted image 20231127093559.png]]
- 周转时间：等待时间+执行时间
- 带权周转时间：周转时间/执行时间

## 作业调度算法
- 先来先服务：按作业进入系统时间进行排序
- 短作业优先：按作业执行时间排序（前提是已经进入了系统）
- 响应比高者优先：
	- $响应比=响应时间/执行时间$，其中响应时间即周转时间
	- $响应比=1+作业等待时间/执行时间$
	- 前提是已经进入了系统
- 优先调度：按某种算法确定各作业的优先级
	- 例：$优先数=等待时间^2-要求执行时间-16*输出量$
	- 其中等待时间以分计，要求执行时间以秒计，输出量以行计

# 进程调度
## 调度/分派结构
- 调度程序：组织和维护就绪队列
- 分派程序：处理机空闲的时候,从就绪队列⾸部选取⼀个PCB投⼊运⾏
![[Pasted image 20231127095645.png]]

## 进程调度功能
1. 记录进程的有关状态：通过在PCB中记录来实现
2. 决定分配策略：由就绪队列排队原则体现
3. 实施处理机的分配和回收：即进程切换

## 调度方式
- 非剥夺方式：当有优先级更高的进程进入就绪队列时，仍让当前进程继续执行，进程完成后才把处理机分配给“重要而紧迫”的进程
- 可剥夺方式：当有优先级更高的进程进入就绪队列时，暂停当前执行的进程，立即把处理机分配给高优先级的进程。

## 进程优先数调度
确定各进程的优先数，从而优先调度进程：
- 静态优先数：在进程创建时就确定优先数，并在整个运行期间都不改变
- 动态优先数：在系统运⾏的途中边运⾏边动态地调整进程的优先数

## 循环轮转调度
系统规定一个时间片，每个进程被调度时分得一个时间片，当这一时间片用完时，进程转为就绪状态进入就绪队列队末

## 多级反馈队列调度
![[Pasted image 20231127103326.png]]

## 调度用的进程状态变迁图
![[Pasted image 20231127103820.png]]
- 进程在运行中超过时间片就进入低优先就绪队列，称为受CPU限制的进程
- 进程由阻塞变为就绪则进入高优先就绪队列，称为受I/O限制的进程
- 这种调度策略优先照顾I/O量大的进程，也适当照顾了计算量大的进程

