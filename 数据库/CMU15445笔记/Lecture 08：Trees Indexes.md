# 表索引
表索引是表属性子集的副本，这些属性经过整理和排序，以便使用这些属性进行高效访问。说白了表索引就是原表的一个小表，用于快速查找对应的key-value。

为确保表索引的正确性，DBMS 确保表和索引的内容在逻辑上始终保持同步。

在每个数据库创建索引的数量之间存在权衡。虽然更多的索引使查找查询更快，但索引也使用存储并且需要维护。

# B+树
## 概述
B+Tree 是一种自平衡树数据结构，它保持数据排序，并允许在$O(logn)$内进行搜索、顺序访问、插入和删除。

B+树是一个 M-way 搜索树(其中 M 表示一个节点可以拥有的子节点的最大数量)：
- 它是完美平衡的 (即每个叶节点都在相同的深度)
- 只有叶子节点存储数据，内部节点只存储索引
- 除根节点外的每个内部节点至少为半满(M/2−1 <= \#keys <= M−1)
- 每个有 k 个键的内部节点有 k+ 1 个非空子节点
- 每个节点上的键按顺序排序

## 插入
要在 B+树中插入一个新条目，必须遍历树并使用内部节点来找出将键插入到哪个叶节点中：
1. 找到正确的叶子 L
2. 按排序顺序向 L 中添加新条目：
	- 如果 L 有足够的空间，则操作完成
	- 否则将 L 拆分为两个节点 L 和 L2。均匀地重新分配条目并向上复制中键。将指向 L2 的索引项插入到 L 的父节点中
3. 要拆分内部 节点 ，要均匀地重新分配条目，但要向上推中间键

## 删除
要在 B+树中删除一个条目，必须遍历树并使用内部节点来找出要删除的键在哪个叶节点中：
1. 找到正确的叶子 L 
2. 删除条目：
	- 如果 L 至少为半满， 则操作结束
	- 否则，你可以尝试重新分配，借用兄弟姐妹
	- 如果再分配失败，合并 L 和 sibling
3. 如果发生合并 ，必须删除 parent 中指向 L 的条目



