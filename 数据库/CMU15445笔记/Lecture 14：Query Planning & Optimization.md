# 概述
- 由于 SQL 是声明性的，因此查询只告诉 DBMS 要计算什么，而不告诉它如何计算
- DBMS 需要 将 SQL 语句转换为可执行的查询计划
- DBMS 优化器的工作是为任何给定的查询选择最优计划

查询优化有两种策略：
- 启发式/基于规则：将查询的部分内容与已知的模式进行匹配，以组合出一个计划
- 代价估计：使用基于成本的搜索来读取数据，并估计执行等效计划的成本

数据库体系：
![[Pasted image 20231206151207.png]]
我们的工作集中在优化器部分，前面的跟编译原理相关

# Logical Query Optimization
常见规则如下：
- 拆分复杂谓词
- 尽早执行过滤器（谓词下推）
- 对谓词进行重新排序，以便 DBMS 首先应用选择性最强的谓词
- 拆分连接谓词
- 投影下推
![[Pasted image 20231206152644.png]]

投影优化：
- 投影下推，尽早执行投影
- 去除不需要的属性

谓词优化：
- 删除不可能的谓词
- 合并不必要的谓词
![[Pasted image 20231206153237.png]]

嵌套查询优化：
- 重写子查询
- ![[Pasted image 20231206153409.png]]
- 分解子查询
- 

