# 导论
## 网络层服务
- 在发送主机和接收主机对之间传送段（segment）
- 在发送端将段封装到数据报中 
- 在接收端，将段上交给传输层实体 
- 网络层协议存在于每一个主机和路由器 （不包括链路层交换机）
- 路由器检查每一个经过它的IP 数据报的头部（用于选择路径）

## 网络层转发与路由
![[Pasted image 20231002091853.png]]
转发是数据平面的功能，路由是控制平面的功能。

## 数据平面、控制平面
![[Pasted image 20231002092534.png]]
传统方式下路由器只会有转发这一个动作，而在SDN方式下，路由器可以有多个动作，比如阻止、泛洪（向所有出路发送）、修改字段，这样就使得整个网络变得可编程。

**传统方式**
传统方式下数据平面和控制平面都集中在一个路由器中，每一个路由器的路由算法元件在控制平面进行交互计算，从而得出路由表，很显然这是一个分布式的过程。

路由选择算法计算出本地转发表后（将在控制平面一章中讲解），数据平面根据IP数据报头部值和转发表匹配后，转发到对应输出链路。

传统方式是一个僵化的方式，一旦设置就难以改变。

**SDN方式**
网络中存在一个集中的SDN服务器，负责与所有路由器进行交互，集中式算出每个路由器的流表后，发送给每个路由器。

这样所有路由器的行为都是可以改变的，因为只需要在集中服务器上进行修改即可。

## 网络服务模型
网络层提供一种尽力而为的服务。
![[Pasted image 20231002095627.png]]

# 路由器组成
## 路由器结构
![[Pasted image 20231002100040.png]]
实际上在路由器中，输入端口和输出端口是整合在一起的。